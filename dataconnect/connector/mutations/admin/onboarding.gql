mutation CreateBusinessAndAdmin(
  $businessId: UUID!
  $businessName: String!
  $userEmail: String!
  $userFirstName: String!
  $userLastName: String!
  $userMobile: String!
  $userProfilePhoto: String
  $authUid: String!
  $today: Date!
) @auth(level: PUBLIC, insecureReason: "Initial onboarding requires creating user record before metadata links are fully established. Anonymous users are allowed to facilitate this first-time setup.") @transaction {
  business_insert(data: {
    id: $businessId
    name: $businessName
    tier: TRIAL
    subscriptionStartDate: $today
  })
  user_insert(data: {
    id: $authUid
    businessId: $businessId
    email: $userEmail
    firstName: $userFirstName
    lastName: $userLastName
    mobile: $userMobile
    profilePhoto: $userProfilePhoto
    role: BUSINESS_ADMIN
  })
}
